<html>
<head>
    <meta charset="UTF-8">
    <title>Pagina de automoveis</title>
    <link rel="stylesheet" href="styles.css">
   
</head>
<body>
    <header class="site-header">
        <div class="brand">
            <a href="/" class="logo" aria-label="Pagina inicial">
                <svg width="40" height="40" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
                    <rect x="4" y="18" width="40" height="14" rx="7" fill="#0d47a1"/>
                    <circle cx="16" cy="34" r="4" fill="#263238"/>
                    <circle cx="32" cy="34" r="4" fill="#263238"/>
                    <rect x="14" y="14" width="20" height="6" rx="3" fill="#42a5f5"/>
                    <rect x="20" y="8" width="8" height="7" rx="2" fill="#0d47a1"/>
                </svg>
                <span class="brand-text">MultiCar</span>
            </a>
        </div>
        <nav class="main-nav" aria-label="Menu principal">
            <ul>
                <li><a href="#fabricantes" id="bt-fabricantes">Fabricantes</a></li>
                <li><a href="#modelos" id="bt-modelos">Modelos</a></li>
                <li><a href="#veiculos" id="bt-veiculos">Veículos</a></li>
            </ul>
        </nav>
        <div class="actions">
            <button class="btn primary">Login</button>
            <button class="btn outline">Registrar</button>
        </div>
    </header>
    <main>
        <section id="fabricantes" class="minha-section">
            <h2>Fabricantes</h2>
            <p>Informações sobre fabricantes de automóveis</p>            
        </section>
        <section id="modelos" class="minha-section">
             <h2>Modelos</h2>
            <p>Informações sobre modelos de automóveis</p>      
        </section>
         <section id="veiculos" class="minha-section">
             <h2>Veículos</h2>
            <p>Informações sobre veículos disponíveis</p>      
        </section>
    </main>
    <script>


async function getData(url) {
   
    try {
        const response = await fetch(url);
        if (!response.ok) {
            throw new Error(`Response status: ${response.status}`);
        }

        const result = await response.json();
       return result;
        }
        catch (error) {
            console.error(error.message);
        }    
}

    const limparSections = function () { 
        document.querySelectorAll(".minha-section").forEach(function(section) {
        section.style.display = "none";
    });
    };


    document.getElementById("bt-fabricantes").addEventListener("click", async function(event) {
    limparSections();
    const secaoFabricantes = document.querySelector("#fabricantes");
    secaoFabricantes.style.display = "block";
    // Limpa o conteúdo anterior da seção (exceto o título e parágrafo)
    secaoFabricantes.querySelectorAll("table").forEach(function(tabela) {
        tabela.remove();
    }); 
    const dadosFabricantes = await getData("http://localhost:8080/api/fabricantes"); 

    secaoFabricantes.appendChild(criarTabela(dadosFabricantes));
});

    
    // // Evento de clique no botão fabricantes
    // document.getElementById("bt-fabricantes").addEventListener("click", function(event) {
    //     limparSections();
    //     document.querySelector("#fabricantes").style.display = "block";
    //     const dadosFabricantes = [
    //     {ID: 1, Nome: "Toyota", Pais: "Japão"},
    //     {ID: 2, Nome: "Ford", Pais: "EUA"},
    //     {ID: 3, Nome: "Volswagen", Pais: "Alemanha"},
    //     {ID: 4, Nome: "Hyundai", Pais: "Coréia do Sul"},
    //     {ID: 5, Nome: "Fiat", Pais: "Itália"},
    // ];
    //     document.querySelector("#fabricantes").appendChild(criarTabela(dadosFabricantes));  
    // });
   

    // Evento de clique no botão modelos
    document.getElementById("bt-modelos").addEventListener("click", function(event) {
        limparSections();
        document.querySelector("#modelos").style.display = "block";
    });

    // Evento de clique no botão veículos
    document.getElementById("bt-veiculos").addEventListener("click", function(event) {
        limparSections();
        document.querySelector("#veiculos").style.display = "block";
    });


    // cria tabela que seja preenchida com os dados de um array de objetos
    function criarTabela(dados) {
    const table = document.createElement("table");
    const thead = document.createElement("thead");
    const tbody = document.createElement("tbody");

    // cria o cabeçalho da tabela
    const cabecalho = Object.keys(dados[0]);        
    const trHead = document.createElement("tr");
    cabecalho.forEach(function(campo) {
        const th = document.createElement("th");
        th.textContent = campo;
        trHead.appendChild(th);
    });

    thead.appendChild(trHead);
    table.appendChild(thead);

    // cria o corpo da tabela
    dados.forEach(function(item) {
        const trBody = document.createElement("tr");
        cabecalho.forEach(function(campo) {
            const td = document.createElement("td");
            td.textContent = item[campo];
            trBody.appendChild(td);
        });
        tbody.appendChild(trBody);
    });

    table.appendChild(tbody);   
    return table;
}


    // function criarTabela(dados) {
    //     const table = document.createElement("table");
    //     const thead = document.createElement("thead");
    //     const tbody = document.createElement("tbody");

    //     // cria o cabeçalho da tabela
    //     const cabecalho = Object.keys(dados[0]);        
    //     const tr = document.createElement("tr");
    //     cabecalho.forEach(function(campo) {
    //         const th = document.createElement("th");
    //         th.textContent = campo;
    //         tr.appendChild(th);
    // });

    // thead.appendChild (tr);
    // table.appendChild (thead);

    // // cria o corpo da tabela
    // dados.forEach(function(item) {
    //     const tr = document.createElement("tr");
    //     cabecalho.forEach(function(campo) {
    //         const td = document.createElement("td");
    //         td.textContent = item[campo];
    //         tr.appendChild(td);
    //     });
    //    tbody.appendChild(tr);

    // });
    // tbody.appendChild(tr);
    // table.appendChild(tbody);   
    
    // return table;
    // };

    </script>
</body>
</html>